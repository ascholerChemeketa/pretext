$sidebar-width: 240px !default;

@use 'toc-basics' with ($sidebar-width: 0);

.ptx-sidebar {
  position: sticky;
  display: none;
  z-index: 200;
  height: 0;
  max-height: 100%;
  top: 35px;
}

.ptx-toc {
  border-right: 2px solid var(--tocborder);
  border-bottom: 2px solid var(--tocborder);
  border-top: 2px solid var(--tocborder);
  max-height: calc(100vh - 100px);
  overflow-y: scroll;
  background: var(--page-color);
  width: $sidebar-width;

  
  // need space to disappear behind footer - pretext logo fills that space
  &::after {
    // Apply logo as a mask so background-color can change it. It is a separate document
    // so no other way to have styles on page affect it.
    content: "";
    mask: url("data:image/svg+xml; utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100%25' height='100%25' viewBox='338 3000 8772 6866'%3E%3Cg style='stroke-width:.025in; stroke:black; fill:none'%3E%3Cpolyline points='472,3590 472,9732 ' style='stroke-width:174; stroke-linejoin:miter; stroke-linecap:round; '%3E%3C/polyline%3E%3Cpath style='stroke-width:126;stroke-linecap:butt;' d='M 4724,9448 A 4660 4660 0 0 1 8598 9259 '%3E%3C/path%3E%3Cpath style='stroke-width:174;stroke-linecap:butt;' d='M 4488,9685 A 4228 4228 0 0 0 472 9732 '%3E%3C/path%3E%3Cpath style='stroke-width:126;stroke-linecap:butt;' d='M 4724,3590 A 4241 4241 0 0 1 8598 3496 '%3E%3C/path%3E%3Cpath style='stroke-width:126;stroke-linecap:round;' d='M 850,3496 A 4241 4241 0 0 1 4724 3590 '%3E%3C/path%3E%3Cpath style='stroke-width:126;stroke-linecap:round;' d='M 850,9259 A 4507 4507 0 0 1 4724 9448 '%3E%3C/path%3E%3Cpolyline points='5385,4299 4062,8125 ' style='stroke-width:300; stroke-linejoin:miter; stroke-linecap:round; '%3E%3C/polyline%3E%3Cpolyline points='8598,3496 8598,9259 ' style='stroke-width:126; stroke-linejoin:miter; stroke-linecap:round; '%3E%3C/polyline%3E%3Cpolyline points='850,3496 850,9259 ' style='stroke-width:126; stroke-linejoin:miter; stroke-linecap:round; '%3E%3C/polyline%3E%3Cpolyline points='4960,9685 4488,9685 ' style='stroke-width:174; stroke-linejoin:miter; stroke-linecap:round; '%3E%3C/polyline%3E%3Cpolyline points='3070,4582 1889,6141 3070,7700 ' style='stroke-width:300; stroke-linejoin:miter; stroke-linecap:round; '%3E%3C/polyline%3E%3Cpolyline points='6418,4582 7600,6141 6418,7700 ' style='stroke-width:300; stroke-linejoin:miter; stroke-linecap:round; '%3E%3C/polyline%3E%3Cpolyline points='8976,3590 8976,9732 ' style='stroke-width:174; stroke-linejoin:miter; stroke-linecap:round; '%3E%3C/polyline%3E%3Cpath style='stroke-width:174;stroke-linecap:butt;' d='M 4960,9685 A 4228 4228 0 0 1 8976 9732 '%3E%3C/path%3E%3C/g%3E%3C/svg%3E");
    mask-position: center;
    mask-repeat: no-repeat;
    display: block;
    height: 13em;
    margin: 1em 2em;
    background-color: var(--page-border-color);
    border-right: 1px solid var(--page-border-color);
    border-left: 1px solid var(--page-border-color);
  }

  // border under the last item before the pretext icon
  & > .toc-item-list:first-child > .toc-item:last-child {
    border-bottom: 3px solid var(--tocborder);
  }
}